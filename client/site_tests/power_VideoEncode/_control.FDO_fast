AUTHOR = "puthik"
NAME = "power_VideoEncode.FDO_fast"
PURPOSE = "Make sure video encode works fine with optional force discharge."

# TEST IS DISABLED UNTIL MIGRATED TO PYTHON 3.
# For instructions on how to: go/tauto-py3-migration
# To re-enable migrate to Python 3.
# If the test is not migrated by 1/14/22 it will be deleted.

CRITERIA = "This test is a benchmark."
TIME = "FAST"
TEST_CATEGORY = "Benchmark"
TEST_CLASS = "power"
TEST_TYPE = "client"

DOC = """
This test makes sure that power_VideoEncode is working fine while optionally
force discharge.

"FDO" is short for "force discharge optional." Test will use EC command to
force DUT to discharge. If it fails, then use AC as the power source.
"""

formats = [
    ('h264', 'hd', 24),
    ('vp9', 'hvga', 24),
    ('vp8', 'qhvga', 15),
]

args_dict = utils.args_to_dict(args)
pdash_note = args_dict.get('pdash_note', '')
job.run_test('power_VideoEncode', tag=NAME.split('.')[1], seconds_per_test=30,
             seconds_period=5, format=formats, pdash_note=pdash_note,
             force_discharge='optional')
