AUTHOR = "puthik"
NAME = "power_VideoCall.FDO_fast_webrtc"
PURPOSE = "Make sure power_VideoCall works fine with optional force discharge."
CRITERIA = "This test is a benchmark."
TIME = "MEDIUM"
TEST_CATEGORY = "Benchmark"
TEST_CLASS = "power"
TEST_TYPE = "client"
PY_VERSION = 3

DOC = """
This test simulates video call multitasking and record power related statistics
while optionally force discharge.

Workload
- Camera preview in 720p using VP9 codec.
- Four VP9 720p 30fps video playback.
- Google Doc with emulated typing.

The fast version only runs for 3 minutes to make sure the test works as expected.

"FDO" is short for "force discharge optional." Test will use EC command to
force DUT to discharge. If it fails, then use AC as the power source.
"""

args_dict = utils.args_to_dict(args)
pdash_note = args_dict.get('pdash_note', '')
job.run_test('power_VideoCall', pdash_note=pdash_note, duration=180,
             tag=NAME.split('.')[1], seconds_period=5,
             force_discharge='optional', webrtc=True)
